<div class="container">

    <section class="col-md-10 scrollspy-container" data-scrollspy>

        <ctrl-breadcrumb ng-show="breadcrumb" ng-model="current.breadcrumb.items" ng-title="current.breadcrumb.title"></ctrl-breadcrumb>

        <div class="row title-container">
            <div class="col-md-12">
                <span ng-click="back()" class="glyphicon glyphicon-arrow-left back-button"></span>
                <h1 class="title">{{ title }}</h1>
                <div class="buttons">
                    <button type="button" ng-show="!published && !draft" class="btn btn-danger" ng-click="discard()">discard</button>
                    <button type="button" ng-disabled="published && !draft" class="btn btn-success" ng-click="publish()">publish</button>
                </div>
            </div>
        </div>

        <hr />

        <div id="page-title" data-scrollspy="title" ng-show="entity.properties.title">
            <div class="row">
                <ctrl-text class="col-md-12" ng-model="node.title[language]" ng-validating="node.active[language] || language === defaults.language" ng-disabled="!entity.properties.title" ng-required="true" ng-auto-focus="true" ng-label="title"></ctrl-text>
            </div>

            <hr />
        </div>

        <div id="page-parent" data-scrollspy="parent" ng-show="entity.properties.parent">
            <div class="row">
                <ctrl-node class="col-md-12" language="defaults.language" ng-model="node.parent" ng-domain="node.domain" ng-disabled="!entity.properties.parent" ng-required="false" ng-options="parentOptions" ng-label="parent" ng-tip="leave blank for root"></ctrl-node>
            </div>

            <hr />
        </div>

        <div id="page-type" ng-show="node.domain === 'core' && entities.length &gt; 1" data-scrollspy="type">
            <div class="row">
                <ctrl-select class="col-md-12" ng-model="node.entity" ng-required="true" ng-label="type" ng-options="entities" ng-disabled="node.domain !== 'core'"></ctrl-select>
            </div>

            <hr />
        </div>

        <div id="page-language" data-scrollspy="language" ng-show="localized">
            <div class="row">
                <div class="col-md-12 form-group">
                    <label class="control-label" for="ddlLanguage">language</label>
                    <select class="form-control" id="ddlLanguage" ng-model="language">
                        <option ng-repeat="item in languages" value="{{item.code}}" ng-selected="item.code === language">{{item.name}}</option>
                    </select>
                </div>
            </div>

            <hr />
        </div>

        <div id="page-seo" data-scrollspy="url" ng-show="entity.properties.seo || entity.properties.active">
            <div class="row breadcrumb-form-row">
                <div class="col-md-10" ng-show="entity.properties.seo">
                    <label for="txtSeoName">url</label>
                    <ol class="breadcrumb">
                        <li ng-repeat="item in seoNames"><span>{{item[language]}}</span></li>
                        <li class="active">
                            <ctrl-text ng-model="node.seo[language]" ng-required="true" ng-validating="node.active[language]" ng-disabled="!entity.properties.seo" ng-validate="validateSeo" ng-valid="validation.seo" ng-characters="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789-_"></ctrl-text>
                            <span ng-show="!validation.seo && node.active[language] && entity.properties.seo">(name is taken)</span>
                        </li>
                    </ol>
                </div>
                <ctrl-check class="col-md-2" ng-show="entity.properties.active" ng-model="node.active[language]" ng-label="active"></ctrl-check>

            </div>

            <hr />
        </div>

        <div id="page-addon" data-scrollspy="addon" ng-show="node.entity === 'pointer'">
            <div class="row">
                <ctrl-select class="col-md-6" ng-model="node.pointer.domain" ng-required="true" ng-disabled="node.entity !== 'pointer'" ng-label="addon" ng-default="true" ng-options="modules" ng-name-field="name" ng-value-field="domain"></ctrl-select>
                <ctrl-node class="col-md-5" language="defaults.language" ng-model="node.pointer.nodeId" ng-domain="node.pointer.domain" ng-required="node.pointer.domain && node.entity === 'pointer'" ng-disabled="node.entity !== 'pointer'" ng-options="{ pointee: true }" ng-label="pointee"></ctrl-node>
                <div class="col-md-1">
                    <button type="button" ng-disabled="!node.pointer.domain || !node.pointer.nodeId" class="btn" ng-click="editPointee()" style="position: relative; top: 25px">edit</button>
                </div>
            </div>

            <hr />
        </div>

        <div id="page-route" data-scrollspy="route" ng-show="node.entity === 'router'">
            <div class="row">
                <ctrl-select class="col-md-12" ng-model="node.route" ng-required="true" ng-disabled="node.entity !== 'router'" ng-label="route" ng-default="true" ng-options="routes" ng-name-field="name" ng-value-field="id"></ctrl-select>
            </div>
            <hr />
        </div>

        <div class="row" id="page-layout" data-scrollspy="layout" ng-show="entity.properties.layout && domain == 'core'">
            <ctrl-select class="col-md-10" ng-model="values.layout" ng-disabled="!entity.properties.layout || node.layout.inherits" ng-required="true" ng-options="layouts" ng-default="true" ng-value-field="id" ng-name-field="name" ng-label="layout"></ctrl-select>
            <ctrl-check class="col-md-2" ng-model="node.layout.inherits" ng-disabled="!entity.properties.layout" ng-label="inheritance"></ctrl-check>
        </div>
        <hr ng-show="entity.properties.layout && domain == 'core'" />

        <div id="page-content" data-scrollspy="content" ng-show="node.entity !== 'pointer'">

            <div class="row" id="page-template" data-scrollspy="template" ng-show="entity.properties.template">
                <ctrl-select class="col-md-12" ng-model="node.template" ng-disabled="!entity.properties.template" ng-required="true" ng-options="templates[node.entity]" ng-default="true" ng-value-field="id" ng-name-field="name" ng-label="template"></ctrl-select>
            </div>

            <hr ng-show="entity.properties.template" />

            <div ng-repeat="tmplItem in tmpls">
                <div ng-include="tmplItem"></div>
                <hr />
            </div>

            <div ng-show="form" ng-include="form"></div>
            <hr ng-show="form" />
        </div>

        <div id="page-meta" data-scrollspy="meta" ng-show="entity.properties.meta">
            <div id="page-meta-title" class="row" data-scrollspy="title">
                <ctrl-text class="col-md-12" ng-model="node.meta[language].title" ng-required="true" ng-validating="node.active[language]" ng-disabled="!entity.properties.meta" ng-label="meta title"></ctrl-text>
            </div>
            <div id="page-meta-description" class="row" data-scrollspy="description">
                <ctrl-text-area class="col-md-12" ng-rows="4" ng-model="node.meta[language].description" ng-required="false" ng-validating="node.active[language]" ng-disabled="!entity.properties.meta" ng-label="meta description"></ctrl-text-area>
            </div>
            <div id="page-meta-keywords" class="row" data-scrollspy="keywords">
                <ctrl-text-area class="col-md-12" ng-rows="4" ng-model="node.meta[language].keywords" ng-required="false" ng-validating="node.active[language]" ng-disabled="!entity.properties.meta" ng-label="meta keywords"></ctrl-text-area>
            </div>

            <hr />
        </div>

        <div id="page-robots" data-scrollspy="robots" ng-show="entity.properties.robots">
            <div class="row">
                <ctrl-check-list class="col-md-10" ng-model="values.robots" ng-options="robots" ng-required="true" ng-disabled="!entity.properties.robots || node.robots.inherits" ng-label="robots"></ctrl-check-list>
                <ctrl-check class="col-md-2" ng-model="node.robots.inherits" ng-disabled="!entity.properties.robots" ng-label="inheritance"></ctrl-check>
            </div>

            <hr />
        </div>

        <div id="page-permissions" data-scrollspy="permissions" ng-show="entity.properties.permissions">
            <div class="row">
                <ctrl-check-list class="col-md-10" ng-model="values.roles" ng-options="roles" ng-required="true" ng-disabled="!entity.properties.permissions || node.roles.inherits" ng-label="permissions"></ctrl-check-list>
                <ctrl-check class="col-md-2" ng-model="node.roles.inherits" ng-disabled="!entity.properties.permissions" ng-label="inheritance"></ctrl-check>
            </div>

            <hr />
        </div>

        <div id="page-ssl" data-scrollspy="ssl" ng-show="application.ssl && entity.properties.ssl">
            <div class="row">
                <ctrl-check class="col-md-10" ng-model="values.secure" ng-disabled="!application.ssl || !entity.properties.ssl || node.secure.inherits" ng-label="ssl"></ctrl-check>
                <ctrl-check class="col-md-2" ng-model="node.secure.inherits" ng-disabled="!application.ssl || !entity.properties.ssl" ng-label="inheritance"></ctrl-check>
            </div>

            <hr />
        </div>

    </section>

    <div class="col-md-2">
        <scrollspy ng-model="nav" />
    </div>

</div>
