<div class="container">

    <section class="col-md-10 scrollspy-container" data-scrollspy>

        <ctrl-breadcrumb ng-model="current.breadcrumb" ng-title="you are here:"></ctrl-breadcrumb>    

        <div class="row title-container">
            <div class="col-md-12">
                <span ng-click="back()" class="glyphicon glyphicon-arrow-left back-button"></span>
                <h1 class="title">{{ name }}</h1>
                <div class="buttons">
                    <button type="button" ng-show="!published" class="btn btn-danger" ng-click="discard()">Discard</button>                    
                    <button type="button" ng-hide="true" class="btn btn-primary" ng-click="preview()">Preview</button>
                    <button type="button" ng-disabled="published && node.published" class="btn btn-success" ng-click="publish()">Publish</button>
                </div>
            </div>
        </div>

        <hr />

        <div class="row" id="page-name" data-scrollspy="Name">
            <ctrl-text class="col-md-6" ng-model="node.name" ng-required="true" ng-auto-focus="true" ng-label="Name"></ctrl-text>
            <ctrl-text class="col-md-6" ng-model="node.code" ng-validate="validateCode" ng-invalid="validation.code" ng-label="Code"></ctrl-text>
        </div>

        <hr />

        <div class="row" id="page-parent" data-scrollspy="Parent">
            <ctrl-node class="col-md-12" ng-model="node.parent" ng-domain="node.domain" ng-required="false" ng-options="parentOptions" ng-label="Parent"></ctrl-node>
        </div>
        
        <hr />

        <div class="row" id="page-type" ng-show="node.domain === 'core'" data-scrollspy="Type">
            <ctrl-select class="col-md-12" ng-model="node.entity" ng-required="true" ng-label="Type" ng-options="types" ng-enabled="node.domain === 'core'"></ctrl-select>
        </div>

        <hr />

        <div class="row" id="page-language" data-scrollspy="Language">
            <div class="col-md-12 form-group">
                <label class="control-label" for="ddlLanguage">Language</label>
                <select class="form-control" id="ddlLanguage" ng-model="language">
                    <option ng-repeat="item in languages" value="{{item.code}}" ng-selected="item.code === language">{{item.name}}</option>
                </select>
            </div>
        </div>

        <hr />

        <div class="row breadcrumb-form-row" id="page-seo" data-scrollspy="Url">
            <div class="col-md-10">
                <label for="txtSeoName">Url</label>
                <ol class="breadcrumb">
                    <li ng-repeat="item in seoNames"><span>{{item[language]}}</span></li>
                    <li class="active">
                        <ctrl-text ng-model="node.data.localized[language].seoName" ng-required="true" ng-validate="validateSeo" ng-invalid="validation.seo" ng-characters="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789-_"></ctrl-text>
                        <span ng-show="!validation.seo">(name is taken)</span>
                    </li>
                </ol>
            </div>

            <ctrl-check class="col-md-2" ng-model="node.data.localized[language].active" ng-label="Active"></ctrl-check>
        </div>

        <hr />

        <div id="page-addon" data-scrollspy="Addon" ng-show="node.entity === 'pointer'">
            <div class="row">
                <ctrl-select class="col-md-6" ng-model="node.pointer.domain" ng-required="true" ng-enabled="node.entity === 'pointer'" ng-label="Addon" ng-default="true" ng-options="addons" ng-name-field="name" ng-value-field="domain"></ctrl-select>
                <ctrl-node class="col-md-6" ng-model="node.pointer.nodeId" ng-domain="node.pointer.domain" ng-required="false" ng-enabled="node.entity === 'pointer'" ng-label="Pointee"></ctrl-node>
            </div>
        </div>

        <div id="page-link" ng-show="node.entity === 'link'" data-scrollspy="Link">
            <div class="row" id="page-link-title" data-scrollspy="Title">
                <ctrl-text class="col-md-12" ng-model="node.data.localized[language].link.title" ng-required="true" ng-label="Title" ng-enabled="node.entity === 'link'"></ctrl-text>
            </div>
            <div class="row" id="page-link-url" data-scrollspy="Url">
                <ctrl-text class="col-md-10" ng-model="node.data.localized[language].link.url" ng-required="true" ng-label="Url" ng-enabled="node.entity === 'link'"></ctrl-text>
                <ctrl-select class="col-md-2" ng-model="node.data.localized[language].link.target" ng-required="true" ng-label="Target" ng-options="[{value: '_self', name: 'Self'}, {value: '_blank', name: 'Blank'}]" ng-enabled="node.entity === 'link'"></ctrl-select>
            </div>
        </div>

        <div id="page-content" data-scrollspy="Content" ng-show="node.entity === 'page'">
            <div class="row" id="page-template" data-scrollspy="Template">
                <ctrl-select class="col-md-12" ng-model="node.view" ng-required="true" ng-label="Template" ng-options="views" ng-default="true" ng-value-field="tmpl" ng-name-field="tmpl" ng-enabled="node.entity === 'page'"></ctrl-select>
            </div>

            <div ng-show="tmpl" ng-include="tmpl"></div>
        </div>

        <hr ng-show="node.entity !== 'link'" />

        <div id="page-meta" ng-show="node.entity !== 'link'" data-scrollspy="Meta">
            <div id="page-meta-title" class="row" data-scrollspy="Title">
                <ctrl-text class="col-md-12" ng-model="node.data.localized[language].meta.title" ng-required="true" ng-label="Meta Title" ng-enabled="node.entity !== 'link'"></ctrl-text>
            </div>
            <div id="page-meta-description" class="row" data-scrollspy="Description">
                <ctrl-text-area class="col-md-12" ng-rows="4" ng-model="node.data.localized[language].meta.description" ng-required="false" ng-label="Meta Description" ng-enabled="node.entity !== 'link'"></ctrl-text-area>
            </div>
            <div id="page-meta-keywords" class="row" data-scrollspy="Keywords">
                <ctrl-text-area class="col-md-12" ng-rows="4" ng-model="node.data.localized[language].meta.keywords" ng-required="false" ng-label="Meta Keywords" ng-enabled="node.entity !== 'link'"></ctrl-text-area>
            </div>
        </div>

        <hr />

        <div id="page-permissions" data-scrollspy="Permissions">
            <div class="row">
                <ctrl-check class="col-md-4" ng-model="node.permissions.inherits" ng-label="Inherits from parent"></ctrl-check>
                <ctrl-check-list class="col-md-8" ng-model="roles" ng-options="roleOptions" ng-required="true" ng-enabled="!node.permissions.inherits" ng-label="Permissions"></ctrl-check-list>
            </div>
        </div>

        <hr />

    </section>

    <div class="col-md-2">
        <scrollspy data="nav" />
    </div>

</div>
